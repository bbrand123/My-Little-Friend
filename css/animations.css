/* Extracted from style.css - Celebration effects, idle micro-animations, sleep nudge, feed menu, dynamic time-of-day enhancements, idle SVG sway, stat bar warning, care action particles, garden SVG crops, seasonal theming, thought bubble with name, species-specific idle animations, room transitions, weather ambient particles, emoji burst, streak flame, pet action loops */

        /* ==================== CELEBRATION EFFECTS ==================== */

        .celebration-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(255,215,0,0.5) 0%, rgba(255,255,255,0) 70%);
            pointer-events: none;
            z-index: 9998;
            animation: celebration-flash-anim 0.6s ease-out forwards;
        }

        @keyframes celebration-flash-anim {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        .celebration-pulse {
            animation: celebration-pulse-anim 1.2s ease-in-out !important;
        }

        @keyframes celebration-pulse-anim {
            0% { transform: scale(1); }
            15% { transform: scale(1.25); }
            30% { transform: scale(1); }
            45% { transform: scale(1.15); }
            60% { transform: scale(1); }
            75% { transform: scale(1.08); }
            100% { transform: scale(1); }
        }


        /* ==================== IDLE MICRO-ANIMATIONS ==================== */

        /* Blink animation - brief eye squint */
        .pet-container.idle-blink .pet-svg {
            animation: idleBlink 0.2s ease-in-out;
        }

        @keyframes idleBlink {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(0.92); }
        }

        /* Twitch animation - subtle nose/head movement */
        .pet-container.idle-twitch .pet-svg {
            animation: idleTwitch 0.4s ease-in-out;
        }

        @keyframes idleTwitch {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(1px) rotate(0.5deg); }
            50% { transform: translateX(-1px) rotate(-0.5deg); }
            75% { transform: translateX(0.5px) rotate(0.3deg); }
        }

        /* Low energy - droopy/tumble animation */
        .pet-container.idle-low-energy .pet-svg {
            animation: idleDroopy 3s ease-in-out infinite;
        }

        @keyframes idleDroopy {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(2px) rotate(-2deg); }
            50% { transform: translateY(4px) rotate(0deg); }
            75% { transform: translateY(2px) rotate(2deg); }
        }

        /* Pettable cursor for pet container */
        .pet-container.pettable {
            cursor: pointer;
            transition: transform 0.2s ease, filter 0.2s ease;
        }

        .pet-container.pettable:hover .pet-svg {
            filter: brightness(1.08) drop-shadow(0 0 6px rgba(255, 180, 162, 0.5));
        }

        /* ==================== SLEEP NUDGE ICON ==================== */

        .sleep-nudge-icon {
            position: absolute;
            top: 0;
            right: -5px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            pointer-events: none;
            z-index: 5;
        }

        .sleep-nudge-z {
            font-family: 'Nunito', sans-serif;
            font-weight: 900;
            color: #7C6BFF;
            opacity: 0;
            animation: sleepNudgeFloat 2.5s ease-in-out infinite;
        }

        .sleep-nudge-z.z1 {
            font-size: 1.2rem;
            animation-delay: 0s;
        }

        .sleep-nudge-z.z2 {
            font-size: 1rem;
            animation-delay: 0.4s;
        }

        .sleep-nudge-z.z3 {
            font-size: 0.7rem;
            animation-delay: 0.8s;
        }

        @keyframes sleepNudgeFloat {
            0% {
                opacity: 0;
                transform: translateY(0) translateX(0);
            }
            20% {
                opacity: 0.8;
            }
            100% {
                opacity: 0;
                transform: translateY(-20px) translateX(8px);
            }
        }

        /* ==================== FEED MENU ==================== */

        .feed-menu-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.45);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-overlay);
            padding: 20px;
            animation: fadeInOverlay 0.2s ease;
        }

        @keyframes fadeInOverlay {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .feed-menu {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            max-width: 360px;
            width: 100%;
            box-shadow: var(--shadow-overlay);
            animation: slideUpModal 0.3s ease-out;
        }

        @keyframes slideUpModal {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .feed-menu-title {
            font-size: var(--heading-sm);
            font-weight: 900;
            color: var(--color-primary);
            text-align: center;
            margin-bottom: 4px;
        }

        .feed-menu-subtitle {
            font-size: 0.7rem;
            color: var(--color-text-secondary);
            text-align: center;
            margin-bottom: 12px;
        }

        .feed-menu-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 300px;
            overflow-y: auto;
        }

        .feed-menu-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border: 2px solid #f0ebe4;
            border-radius: var(--radius-md);
            background: #FFFAF5;
            cursor: pointer;
            transition: all 0.15s ease;
            text-align: left;
            font-family: inherit;
            font-size: 0.85rem;
            flex-wrap: wrap;
        }

        .feed-menu-item:hover, .feed-menu-item:focus {
            border-color: var(--color-button-feed);
            background: #FFF5EE;
            transform: translateY(-1px);
            box-shadow: var(--shadow-medium);
        }

        .feed-menu-item:active {
            transform: translateY(0);
        }

        .feed-menu-item.standard-meal {
            border-color: #e8e0d8;
        }

        .feed-item-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
            width: 36px;
            text-align: center;
        }

        .feed-item-name {
            flex: 1;
            font-weight: 700;
            color: var(--color-text);
            font-size: 0.85rem;
        }

        .feed-item-effect {
            display: none;
            font-size: 0.7rem;
            color: #66BB6A;
            font-weight: 600;
            width: 100%;
            margin-top: 4px;
        }

        .feed-menu-item:hover .feed-item-effect,
        .feed-menu-item:focus .feed-item-effect {
            display: block;
        }

        .feed-item-count {
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--color-button-feed);
            background: rgba(255, 154, 92, 0.1);
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            flex-shrink: 0;
        }

        .feed-menu-close {
            display: block;
            width: 100%;
            margin-top: 12px;
            padding: 10px;
            border: none;
            border-radius: var(--radius-md);
            background: #f5f0eb;
            color: var(--color-text-secondary);
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 700;
            cursor: pointer;
            transition: background 0.15s ease;
        }

        .feed-menu-close:hover, .feed-menu-close:focus {
            background: #ece5dd;
        }

        /* Feed button crop badge */
        .feed-crop-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #66BB6A;
            color: white;
            font-size: 0.7rem;
            font-weight: 900;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-subtle);
            border: 2px solid white;
            z-index: 2;
            animation: cropBadgeIn 0.3s ease-out;
        }

        @keyframes cropBadgeIn {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .action-btn.cooldown .feed-crop-badge {
            opacity: 0;
            transition: opacity 0.15s ease;
        }

        /* ==================== DYNAMIC TIME-OF-DAY ENHANCEMENTS ==================== */

        /* Golden Hour (sunset) warm overlay for indoor rooms */
        .pet-area.sunset::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(255, 126, 95, 0.08) 0%, rgba(254, 180, 123, 0.05) 100%);
            pointer-events: none;
            z-index: 0;
            border-radius: var(--radius);
        }

        /* Night dimmed interior overlay */
        .pet-area.nighttime {
            filter: brightness(0.95);
        }

        /* Smooth transitions for time-of-day changes */
        .pet-area {
            transition: background 0.5s ease, filter 0.5s ease;
        }


/* ==================== ENHANCEMENT: Idle SVG Sway ==================== */
.pet-container .pet-svg {
    animation: idleSway 4s ease-in-out infinite;
}

@keyframes idleSway {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(1.5deg); }
    75% { transform: rotate(-1.5deg); }
}

/* Disable sway during action animations */
.pet-container.bounce .pet-svg,
.pet-container.wiggle .pet-svg,
.pet-container.sparkle .pet-svg,
.pet-container.sleep-anim .pet-svg,
.pet-container.groom-anim .pet-svg,
.pet-container.treat-anim .pet-svg,
.pet-container.pet-tap-bounce .pet-svg,
.pet-container.cuddle-anim .pet-svg,
.pet-container.exercise-anim .pet-svg,
.pet-container.heal-anim .pet-svg {
    animation: none;
}

/* ==================== ENHANCEMENT: Stat Bar Warning System ==================== */
.need-bubble.critical {
    animation: criticalPulse 1.2s ease-in-out infinite;
}

.need-bubble.critical .need-bubble-ring {
    box-shadow: 0 0 8px 2px rgba(239, 83, 80, 0.5);
}

@keyframes criticalPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
}

.need-bubble.warning .need-bubble-ring {
    box-shadow: 0 0 4px 1px rgba(255, 152, 0, 0.3);
}

/* ==================== ENHANCEMENT: Care Action Particles ==================== */
.care-particle {
    position: absolute;
    pointer-events: none;
    font-size: 1.2rem;
    z-index: 10;
    animation: careParticleFloat 1.2s ease-out forwards;
}

@keyframes careParticleFloat {
    0% { opacity: 1; transform: translate(0, 0) scale(1); }
    100% { opacity: 0; transform: translate(var(--dx, 0px), var(--dy, -40px)) scale(0.5); }
}

.stat-change-float {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.9rem;
    font-weight: 700;
    pointer-events: none;
    z-index: 10;
    animation: statFloat 1.5s ease-out forwards;
    white-space: nowrap;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5), 0 0 6px rgba(0,0,0,0.3);
    background: rgba(0,0,0,0.4);
    padding: 1px 6px;
    border-radius: 8px;
    color: #fff;
}

.stat-change-float.positive { color: #b9f6ca; background: rgba(27, 94, 32, 0.5); }
.stat-change-float.negative { color: #ffcdd2; background: rgba(183, 28, 28, 0.5); }

@keyframes statFloat {
    0% { opacity: 1; transform: translateX(-50%) translateY(0); }
    100% { opacity: 0; transform: translateX(-50%) translateY(-35px); }
}


/* ==================== ENHANCEMENT: Garden SVG Crops ==================== */
.garden-plot-svg {
    width: 36px;
    height: 36px;
    display: inline-block;
    vertical-align: middle;
}

/* ==================== ENHANCEMENT: Seasonal Theming ==================== */
.pet-area.season-spring {
    --season-tint: rgba(255, 182, 193, 0.08);
}

.pet-area.season-summer {
    --season-tint: rgba(255, 200, 50, 0.08);
}

.pet-area.season-autumn {
    --season-tint: rgba(200, 120, 50, 0.08);
}

.pet-area.season-winter {
    --season-tint: rgba(180, 210, 240, 0.1);
}

.pet-area[class*="season-"]::after {
    background-image: linear-gradient(to top, var(--season-tint, transparent), transparent);
}

/* ==================== ENHANCEMENT: Thought Bubble with Name ==================== */
.thought-bubble .thought-text {
    font-size: 0.75rem;
    color: #555;
    display: block;
    margin-top: 1px;
    white-space: nowrap;
    max-width: 80px;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ==================== SPECIES-SPECIFIC IDLE ANIMATIONS ==================== */
.species-idle-effect {
    position: absolute;
    top: -10px;
    right: -5px;
    font-size: 1.2rem;
    animation: speciesIdleFloat 2.5s ease-out forwards;
    pointer-events: none;
    z-index: 4;
}
@keyframes speciesIdleFloat {
    0% { opacity: 0; transform: translateY(0) scale(0.5); }
    15% { opacity: 1; transform: translateY(-5px) scale(1); }
    70% { opacity: 1; transform: translateY(-20px) scale(1); }
    100% { opacity: 0; transform: translateY(-30px) scale(0.7); }
}

/* Dog tail wag */
.idle-species-wag .pet-svg {
    animation: speciesWag 0.3s ease-in-out 4 alternate;
}
@keyframes speciesWag {
    0% { transform: rotate(-2deg); }
    100% { transform: rotate(2deg); }
}

/* Cat grooming */
.idle-species-groom .pet-svg {
    animation: speciesGroom 0.6s ease-in-out 2;
}
@keyframes speciesGroom {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(5deg) translateX(2px); }
    75% { transform: rotate(-3deg) translateX(-1px); }
}

/* Bunny/bird/frog hop */
.idle-species-hop .pet-svg {
    animation: speciesHop 0.4s ease-in-out 3;
}
@keyframes speciesHop {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
}

/* Hamster spin */
.idle-species-spin .pet-svg {
    animation: speciesSpin 0.8s ease-in-out 2;
}
@keyframes speciesSpin {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(10deg) scale(1.05); }
}

/* Turtle stretch */
.idle-species-stretch .pet-svg {
    animation: speciesStretch 1.5s ease-in-out 1;
}
@keyframes speciesStretch {
    0%, 100% { transform: scaleX(1); }
    50% { transform: scaleX(1.08) scaleY(0.95); }
}

/* Fish swim */
.idle-species-swim .pet-svg {
    animation: speciesSwim 0.5s ease-in-out 3;
}
@keyframes speciesSwim {
    0%, 100% { transform: translateX(0) rotate(0); }
    25% { transform: translateX(3px) rotate(2deg); }
    75% { transform: translateX(-3px) rotate(-2deg); }
}

/* Hedgehog snuffle */
.idle-species-snuffle .pet-svg {
    animation: speciesSnuffle 0.3s ease-in-out 4;
}
@keyframes speciesSnuffle {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(2px) scaleY(0.97); }
}

/* Panda munch */
.idle-species-munch .pet-svg {
    animation: speciesMunch 0.4s ease-in-out 3;
}
@keyframes speciesMunch {
    0%, 100% { transform: scaleY(1); }
    50% { transform: scaleY(0.95) scaleX(1.03); }
}

/* Penguin waddle */
.idle-species-waddle .pet-svg {
    animation: speciesWaddle 0.4s ease-in-out 4 alternate;
}
@keyframes speciesWaddle {
    0% { transform: rotate(-4deg) translateX(-2px); }
    100% { transform: rotate(4deg) translateX(2px); }
}

/* Unicorn sparkle */
.idle-species-sparkle .pet-svg {
    animation: speciesSparkle 1s ease-in-out 1;
}
@keyframes speciesSparkle {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.2) drop-shadow(0 0 6px rgba(255,215,0,0.5)); }
}

/* Dragon puff */
.idle-species-puff .pet-svg {
    animation: speciesPuff 0.6s ease-in-out 2;
}
@keyframes speciesPuff {
    0%, 100% { transform: scale(1); }
    30% { transform: scale(1.08); }
    60% { transform: scale(0.97); }
}

@media (prefers-reduced-motion: reduce) {
    .species-idle-effect { animation: none !important; }
    .idle-species-wag .pet-svg,
    .idle-species-groom .pet-svg,
    .idle-species-hop .pet-svg,
    .idle-species-spin .pet-svg,
    .idle-species-stretch .pet-svg,
    .idle-species-swim .pet-svg,
    .idle-species-snuffle .pet-svg,
    .idle-species-munch .pet-svg,
    .idle-species-waddle .pet-svg,
    .idle-species-sparkle .pet-svg,
    .idle-species-puff .pet-svg { animation: none !important; }
}


/* ==================== FEATURE: ROOM TRANSITION ANIMATION (ENHANCED) ==================== */

.pet-area.room-slide-out {
    animation: roomSlideOut 0.25s ease-in forwards;
}

.pet-area.room-slide-in {
    animation: roomSlideIn 0.3s ease-out forwards;
}

@keyframes roomSlideOut {
    0% { opacity: 1; transform: translateX(0); }
    100% { opacity: 0; transform: translateX(-20px); }
}

@keyframes roomSlideIn {
    0% { opacity: 0; transform: translateX(20px); }
    100% { opacity: 1; transform: translateX(0); }
}

/* ==================== FEATURE: WEATHER AMBIENT PARTICLE EFFECTS ==================== */

.weather-particles-layer {
    position: absolute;
    inset: 0;
    overflow: hidden;
    pointer-events: none;
    z-index: 2;
}

.weather-particle {
    position: absolute;
    pointer-events: none;
    will-change: transform;
}

/* Rain particles */
.weather-particle.rain-drop {
    width: 2px;
    height: 12px;
    background: linear-gradient(to bottom, transparent, rgba(100, 149, 237, 0.6));
    border-radius: 0 0 2px 2px;
    animation: weatherRainFall linear infinite;
}

@keyframes weatherRainFall {
    0% { transform: translateY(-20px); opacity: 0; }
    10% { opacity: 0.7; }
    90% { opacity: 0.7; }
    100% { transform: translateY(300px); opacity: 0; }
}

/* Snow particles */
.weather-particle.snowflake {
    width: 6px;
    height: 6px;
    background: white;
    border-radius: 50%;
    opacity: 0.7;
    animation: weatherSnowFall linear infinite;
}

@keyframes weatherSnowFall {
    0% { transform: translateY(-10px) translateX(0) rotate(0deg); opacity: 0; }
    10% { opacity: 0.8; }
    50% { transform: translateY(150px) translateX(20px) rotate(180deg); }
    90% { opacity: 0.6; }
    100% { transform: translateY(300px) translateX(-10px) rotate(360deg); opacity: 0; }
}

/* Sunny rays */
.weather-particle.sun-ray {
    width: 2px;
    height: 40px;
    background: linear-gradient(to bottom, rgba(255, 235, 59, 0.3), transparent);
    transform-origin: top center;
    animation: weatherSunRay 4s ease-in-out infinite;
}

@keyframes weatherSunRay {
    0%, 100% { opacity: 0.15; transform: scaleY(0.8); }
    50% { opacity: 0.3; transform: scaleY(1.1); }
}

/* ==================== FEATURE: EMOJI REACTION BURST ON CARE ACTIONS ==================== */

.emoji-burst-particle {
    position: absolute;
    font-size: 1.2rem;
    pointer-events: none;
    z-index: 10;
    animation: emojiBurstFly 0.9s ease-out forwards;
    will-change: transform, opacity;
}

@keyframes emojiBurstFly {
    0% {
        transform: translate(0, 0) scale(0.5) rotate(0deg);
        opacity: 1;
    }
    30% {
        transform: translate(var(--burst-x), var(--burst-y)) scale(1.2) rotate(var(--burst-rot));
        opacity: 1;
    }
    100% {
        transform: translate(var(--burst-x), calc(var(--burst-y) + 30px)) scale(0.3) rotate(var(--burst-rot));
        opacity: 0;
    }
}

/* ==================== FEATURE: STREAK FLAME INDICATOR ON MAIN SCREEN ==================== */

.streak-hud {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    font-size: 0.82rem;
    font-weight: 700;
    color: #FF6D00;
    background: rgba(255, 109, 0, 0.08);
    min-height: 44px;
    min-width: 44px;
    padding: 8px 12px;
    border-radius: 12px;
    cursor: pointer;
    transition: transform 0.2s, background 0.2s;
    vertical-align: middle;
    position: relative;
    border: 1px solid rgba(255, 109, 0, 0.24);
    font-family: inherit;
}

.streak-hud:hover {
    transform: scale(1.05);
    background: rgba(255, 109, 0, 0.15);
}

.streak-hud .streak-flame-icon {
    font-size: 0.85rem;
    animation: none;
}

.streak-hud.has-bonus .streak-flame-icon {
    animation: streakFlameFlicker 1.8s ease-in-out 6 alternate;
}

@keyframes streakFlameFlicker {
    0% { transform: scale(1); }
    100% { transform: scale(1.05) translateY(-1px); }
}

@keyframes streakFlameFlickerActive {
    0% { transform: scale(1); filter: brightness(1); }
    100% { transform: scale(1.15) translateY(-2px); filter: brightness(1.2); }
}

.streak-hud .streak-bonus-dot {
    position: absolute;
    top: -2px;
    right: -2px;
    width: 7px;
    height: 7px;
    background: #FF5252;
    border-radius: 50%;
    border: 1.5px solid white;
}

[data-theme="dark"] .streak-hud {
    background: rgba(255, 109, 0, 0.12);
}

[data-theme="dark"] .streak-hud .streak-bonus-dot {
    border-color: #1a1a2e;
}

/* ==================== LIGHTWEIGHT PET ACTION LOOPS ==================== */
.pet-container.pet-munch-loop .pet-svg {
    animation: petMunchLoop 0.65s ease;
    transform-origin: 50% 65%;
}

.pet-container.pet-scrub-shake .pet-svg {
    animation: petScrubShake 0.55s ease;
    transform-origin: 50% 60%;
}

.pet-container.pet-sleepy-nod .pet-svg {
    animation: petSleepyNod 0.9s ease;
    transform-origin: 50% 35%;
}

.pet-container.pet-happy-bounce .pet-svg {
    animation: petHappyBounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    transform-origin: 50% 80%;
}

@keyframes petMunchLoop {
    0%, 100% { transform: scale(1) rotate(0deg); }
    30% { transform: scale(1.04, 0.96) translateY(1px); }
    60% { transform: scale(0.98, 1.02) translateY(-1px); }
}

@keyframes petScrubShake {
    0%, 100% { transform: translateX(0) rotate(0deg); }
    20% { transform: translateX(-3px) rotate(-2deg); }
    40% { transform: translateX(3px) rotate(2deg); }
    60% { transform: translateX(-2px) rotate(-1deg); }
    80% { transform: translateX(2px) rotate(1deg); }
}

@keyframes petSleepyNod {
    0% { transform: rotate(0deg); }
    35% { transform: rotate(6deg) translateY(2px); }
    70% { transform: rotate(-3deg) translateY(1px); }
    100% { transform: rotate(0deg); }
}

@keyframes petHappyBounce {
    0%, 100% { transform: translateY(0) scale(1); }
    30% { transform: translateY(-8px) scale(1.04); }
    55% { transform: translateY(0) scale(0.98); }
    80% { transform: translateY(-3px) scale(1.01); }
}

